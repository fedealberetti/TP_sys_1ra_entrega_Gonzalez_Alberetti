import numpy as np

"""
    Carga y procesa datos espectrales exportados desde Audacity.
    
    Procesa un string con formato de tabla donde:
    - Las columnas están separadas por tabs
    - Los valores decimales usan coma (,) como separador
    
    Returns:
        tuple: Dos arrays NumPy:
            - frecuencias (np.ndarray): Array de frecuencias en Hz
            - nivel_db (np.ndarray): Array de niveles en dB
    
    Processing Steps:
        1. Filtrado de líneas:
           - Elimina líneas vacías y comentarios (que comienzan con '#')
           - Remueve espacios alrededor de cada línea con strip()
        2. Conversión de formatos:
           - Reemplaza comas por puntos para compatibilidad con float()
           - Separa cada línea en dos columnas (frecuencia y nivel dB)
        3. Tipo de datos:
           - Convierte strings a floats
           - Almacena en arrays NumPy para procesamiento numérico
    
    Example:
        >>> frec, db = cargar_espectro()
        >>> print(f"Frecuencia mínima: {frec.min()} Hz")
        >>> print(f"Nivel máximo: {db.max()} dB")
"""

def cargar_espectro_inv():
    datos_audacity = """
#Frecuencia (Hz)	Nivel (dB)
43.066406	-76.466087
86.132812	-73.150604
129.199219	-71.307793
172.265625	-70.015961
215.332031	-69.020882
258.398438	-68.213547
301.464844	-67.533218
344.531250	-66.943993
387.597656	-66.425705
430.664062	-65.962265
473.730469	-65.543671
516.796875	-65.162476
559.863281	-64.811752
602.929688	-64.487106
645.996094	-64.184731
689.062500	-63.902611
732.128906	-63.637375
775.195312	-63.387455
818.261719	-63.151703
861.328125	-62.927135
904.394531	-62.714085
947.460938	-62.511532
990.527344	-62.317585
1033.593750	-62.131737
1076.660156	-61.953197
1119.726562	-61.781933
1162.792969	-61.617821
1205.859375	-61.459152
1248.925781	-61.306225
1291.992188	-61.158585
1335.058594	-61.015148
1378.125000	-60.876896
1421.191406	-60.742924
1464.257812	-60.612888
1507.324219	-60.486549
1550.390625	-60.363636
1593.457031	-60.244354
1636.523438	-60.128254
1679.589844	-60.015060
1722.656250	-59.905010
1765.722656	-59.797695
1808.789062	-59.692451
1851.855469	-59.589542
1894.921875	-59.489330
1937.988281	-59.391727
1981.054688	-59.296295
2024.121094	-59.203079
2067.187500	-59.111214
2110.253906	-59.021328
2153.320312	-58.933517
2196.386719	-58.847168
2239.453125	-58.762497
2282.519531	-58.679611
2325.585938	-58.598286
2368.652344	-58.518410
2411.718750	-58.440235
2454.785156	-58.363403
2497.851562	-58.287533
2540.917969	-58.213032
2583.984375	-58.139927
2627.050781	-58.068043
2670.117188	-57.997166
2713.183594	-57.927513
2756.250000	-57.859127
2799.316406	-57.791225
2842.382812	-57.725086
2885.449219	-57.660072
2928.515625	-57.596107
2971.582031	-57.532856
3014.648438	-57.468929
3057.714844	-57.404911
3100.781250	-57.343018
3143.847656	-57.286110
3186.914062	-57.233963
3229.980469	-57.177731
3273.046875	-57.109661
3316.113281	-57.038193
3359.179688	-56.988331
3402.246094	-56.962681
3445.312500	-56.913456
3488.378906	-56.814568
3531.445312	-56.740387
3574.511719	-56.752380
3617.578125	-56.731743
3660.644531	-56.584129
3703.710938	-56.513065
3746.777344	-56.600151
3789.843750	-56.513702
3832.910156	-56.308208
3875.976562	-56.409916
3919.042969	-56.445457
3962.109375	-56.141380
4005.175781	-56.233963
4048.242188	-56.354126
4091.308594	-55.961151
4134.375000	-56.128464
4177.441406	-56.219532
4220.507812	-55.757984
4263.574219	-56.134865
4306.640625	-55.953053
4349.707031	-55.644543
4392.773438	-56.171345
4435.839844	-55.533089
4478.906250	-55.832073
4521.972656	-55.846226
4565.039062	-55.353767
4608.105469	-56.060524
4651.171875	-55.200508
4694.238281	-55.845417
4737.304688	-55.382423
4780.371094	-55.397087
4823.437500	-55.680508
4866.503906	-55.008636
4909.570312	-55.877651
4952.636719	-54.786446
4995.703125	-55.890293
5038.769531	-54.705647
5081.835938	-55.764511
5124.902344	-54.700645
5167.968750	-55.588600
5211.035156	-54.711613
5254.101562	-55.427349
5297.167969	-54.696873
5340.234375	-55.317390
5383.300781	-54.633514
5426.367188	-55.274773
5469.433594	-54.511284
5512.500000	-55.305233
5555.566406	-54.334507
5598.632812	-55.401417
5641.699219	-54.126385
5684.765625	-55.528027
5727.832031	-53.933704
5770.898438	-55.597633
5813.964844	-53.830528
5857.031250	-55.473690
5900.097656	-53.907688
5943.164062	-55.053848
5986.230469	-54.242859
6029.296875	-54.403603
6072.363281	-54.819603
6115.429688	-53.768425
6158.496094	-55.359249
6201.562500	-53.451077
6244.628906	-55.293232
6287.695312	-53.692432
6330.761719	-54.456787
6373.828125	-54.510735
6416.894531	-53.515247
6459.960938	-55.284538
6503.027344	-53.216072
6546.093750	-54.873692
6589.160156	-53.904594
6632.226562	-53.630955
6675.292969	-55.046494
6718.359375	-53.005836
6761.425781	-54.868183
6804.492188	-53.732674
6847.558594	-53.434414
6890.625000	-55.027233
6933.691406	-52.868565
6976.757812	-54.486954
7019.824219	-54.010109
7062.890625	-52.939899
7105.957031	-55.036732
7149.023438	-53.032238
7192.089844	-53.613033
7235.156250	-54.681690
7278.222656	-52.576611
7321.289062	-54.353024
7364.355469	-53.922058
7407.421875	-52.586609
7450.488281	-54.773289
7493.554688	-53.219242
7536.621094	-52.851830
7579.687500	-54.823250
7622.753906	-52.722240
7665.820312	-53.173580
7708.886719	-54.661240
7751.953125	-52.414680
7795.019531	-53.426670
7838.085938	-54.449596
7881.152344	-52.231636
7924.218750	-53.559532
7967.285156	-54.285374
8010.351562	-52.116966
8053.417969	-53.561420
8096.484375	-54.208939
8139.550781	-52.043083
8182.617188	-53.434139
8225.683594	-54.225056
8268.750000	-52.014339
8311.816406	-53.176323
8354.882812	-54.307270
8397.949219	-52.066570
8441.015625	-52.796017
8484.082031	-54.391003
8527.148438	-52.255615
8570.214844	-52.332966
8613.281250	-54.362045
8656.347656	-52.633682
8699.414062	-51.882961
8742.480469	-54.073792
8785.546875	-53.200756
8828.613281	-51.601418
8871.679688	-53.432007
8914.746094	-53.828770
8957.812500	-51.667587
9000.878906	-52.536652
9043.945312	-54.196331
9087.011719	-52.204376
9130.078125	-51.717171
9173.144531	-53.883621
9216.210938	-53.129978
9259.277344	-51.380642
9302.343750	-52.844692
9345.410156	-53.967148
9388.476562	-51.814812
9431.542969	-51.705017
9474.609375	-53.847912
9517.675781	-52.928516
9560.742188	-51.238644
9603.808594	-52.597054
9646.875000	-53.930958
9689.941406	-51.869514
9733.007812	-51.367043
9776.074219	-53.429462
9819.140625	-53.259907
9862.207031	-51.244568
9905.273438	-51.852146
9948.339844	-53.843410
9991.406250	-52.455013
10034.472656	-51.019234
10077.539062	-52.387959
10120.605469	-53.802536
10163.671875	-51.827473
10206.738281	-51.026684
10249.804688	-52.813217
10292.871094	-53.518677
10335.937500	-51.412571
10379.003906	-51.109718
10422.070312	-53.076637
10465.136719	-53.213310
10508.203125	-51.160839
10551.269531	-51.166241
10594.335938	-53.185616
10637.402344	-53.001144
10680.468750	-51.019875
10723.535156	-51.146805
10766.601562	-53.163578
10809.667969	-52.920284
10852.734375	-50.959866
10895.800781	-51.038780
10938.867188	-53.017502
10981.933594	-52.976322
11025.000000	-50.979870
11068.066406	-50.858654
11111.132812	-52.731106
11154.199219	-53.145000
11197.265625	-51.104023
11240.332031	-50.649994
11283.398438	-52.287102
11326.464844	-53.345699
11369.531250	-51.374599
11412.597656	-50.483841
11455.664062	-51.706669
11498.730469	-53.394295
11541.796875	-51.841290
11584.863281	-50.450306
11627.929688	-51.076992
11670.996094	-53.052895
11714.062500	-52.501957
11757.128906	-50.645615
11800.195312	-50.546181
11843.261719	-52.259338
11886.328125	-53.123238
11929.394531	-51.172409
11972.460938	-50.277225
12015.527344	-51.264500
12058.593750	-53.121849
12101.660156	-52.082340
12144.726562	-50.406288
12187.792969	-50.465679
12230.859375	-52.198280
12273.925781	-52.992729
12316.992188	-51.075783
12360.058594	-50.144489
12403.125000	-50.948326
12446.191406	-52.857922
12489.257812	-52.285721
12532.324219	-50.450645
12575.390625	-50.161552
12618.457031	-51.520279
12661.523438	-53.014793
12704.589844	-51.562378
12747.656250	-50.126007
12790.722656	-50.296497
12833.789062	-51.996876
12876.855469	-52.844391
12919.921875	-51.031647
12962.988281	-49.965595
13006.054688	-50.443020
13049.121094	-52.282829
13092.187500	-52.592243
13135.253906	-50.698341
13178.320312	-49.875446
13221.386719	-50.527477
13264.453125	-52.387222
13307.519531	-52.401928
13350.585938	-50.519310
13393.652344	-49.805099
13436.718750	-50.507290
13479.785156	-52.351097
13522.851562	-52.328907
13565.917969	-50.466240
13608.984375	-49.736984
13652.050781	-50.372452
13695.117188	-52.187313
13738.183594	-52.372799
13781.250000	-50.539768
13824.316406	-49.678875
13867.382812	-50.142277
13910.449219	-51.872147
13953.515625	-52.485889
13996.582031	-50.766415
14039.648438	-49.661186
14082.714844	-49.865475
14125.781250	-51.381386
14168.847656	-52.554005
14211.914062	-51.174286
14254.980469	-49.741623
14298.046875	-49.612827
14341.113281	-50.746387
14384.179688	-52.381100
14427.246094	-51.733147
14470.312500	-50.016895
14513.378906	-49.457855
14556.445312	-50.085331
14599.511719	-51.790966
14642.578125	-52.260544
14685.644531	-50.595463
14728.710938	-49.478355
14771.777344	-49.566837
14814.843750	-50.861626
14857.910156	-52.324387
14900.976562	-51.450001
14944.042969	-49.824833
14987.109375	-49.315918
15030.175781	-49.924793
15073.242188	-51.562710
15116.308594	-52.201778
15159.375000	-50.655479
15202.441406	-49.416336
15245.507812	-49.330154
15288.574219	-50.364841
15331.640625	-51.981239
15374.707031	-51.758835
15417.773438	-50.093224
15460.839844	-49.213806
15503.906250	-49.420540
15546.972656	-50.723434
15590.039062	-52.123569
15633.105469	-51.328609
15676.171875	-49.743614
15719.238281	-49.103054
15762.304688	-49.503269
15805.371094	-50.926819
15848.437500	-52.104965
15891.503906	-51.037987
15934.570312	-49.546543
15977.636719	-49.024185
16020.703125	-49.516918
16063.769531	-50.964714
16106.835938	-52.039833
16149.902344	-50.910488
16192.968750	-49.461620
16236.035156	-48.950802
16279.101562	-49.435143
16322.167969	-50.842361
16365.234375	-51.969814
16408.300781	-50.943920
16451.367188	-49.479340
16494.433594	-48.882584
16537.500000	-49.264256
16580.566406	-50.565056
16623.632812	-51.858231
16666.699219	-51.129898
16709.765625	-49.617085
16752.832031	-48.846752
16795.898438	-49.036266
16838.964844	-50.147984
16882.031250	-51.607327
16925.097656	-51.428753
16968.164062	-49.907448
17011.230469	-48.898693
17054.296875	-48.806602
17097.363281	-49.640942
17140.429688	-51.115524
17183.496094	-51.693333
17226.562500	-50.387119
17269.628906	-49.115211
17312.695312	-48.655972
17355.761719	-49.125290
17398.828125	-50.383408
17441.894531	-51.634521
17484.960938	-51.037746
17528.027344	-49.566116
17571.093750	-48.696419
17614.160156	-48.702499
17657.226562	-49.574955
17700.292969	-51.013634
17743.359375	-51.555553
17786.425781	-50.307377
17829.492188	-49.046703
17872.558594	-48.513386
17915.625000	-48.876381
17958.691406	-49.994846
18001.757812	-51.353924
18044.824219	-51.200947
18087.890625	-49.771854
18130.957031	-48.731098
18174.023438	-48.452358
18217.089844	-49.045647
18260.156250	-50.298073
18303.222656	-51.437874
18346.289062	-50.850014
18389.355469	-49.435741
18432.421875	-48.542339
18475.488281	-48.425396
18518.554688	-49.136089
18561.621094	-50.439804
18604.687500	-51.400768
18647.753906	-50.625614
18690.820312	-49.255451
18733.886719	-48.431381
18776.953125	-48.377274
18820.019531	-49.116337
18863.085938	-50.415218
18906.152344	-51.332031
18949.218750	-50.557293
18992.285156	-49.206207
19035.351562	-48.377937
19078.417969	-48.287891
19121.484375	-48.980869
19164.550781	-50.232002
19207.617188	-51.242729
19250.683594	-50.638451
19293.750000	-49.288292
19336.816406	-48.389423
19379.882812	-48.171116
19422.949219	-48.745743
19466.015625	-49.895439
19509.082031	-51.069614
19552.148438	-50.832237
19595.214844	-49.523987
19638.281250	-48.497734
19681.347656	-48.087013
19724.414062	-48.499706
19767.480469	-49.678459
19810.546875	-51.878868
19853.613281	-55.295254
19896.679688	-59.820362
19939.746094	-65.190887
19982.812500	-71.098999
20025.878906	-77.246078
20068.945312	-83.357491
20112.011719	-89.226288
20155.078125	-94.666542
20198.144531	-99.596664
20241.210938	-104.077377
20284.277344	-107.777939
20327.343750	-111.391129
20370.410156	-114.024788
20413.476562	-116.533195
20456.542969	-118.211983
20499.609375	-119.477669
20542.675781	-120.922028
20585.742188	-121.599602
20628.808594	-122.315781
20671.875000	-122.668533
20714.941406	-122.971535
20758.007812	-122.990982
20801.074219	-122.927277
20844.140625	-122.824371
20887.207031	-123.129128
20930.273438	-123.312981
20973.339844	-123.072891
21016.406250	-123.061218
21059.472656	-123.380943
21102.539062	-123.295120
21145.605469	-123.095276
21188.671875	-122.911354
21231.738281	-123.042618
21274.804688	-123.013985
21317.871094	-123.275940
21360.937500	-123.295845
21404.003906	-123.165543
21447.070312	-123.371208
21490.136719	-123.554939
21533.203125	-123.584396
21576.269531	-123.205421
21619.335938	-123.055298
21662.402344	-123.144508
21705.468750	-123.942055
21748.535156	-123.813629
21791.601562	-123.292519
21834.667969	-122.912804
21877.734375	-123.009796
21920.800781	-123.063629
21963.867188	-123.076157
22006.933594	-123.043877
    """
    
    # Procesamiento: eliminar comas y convertir a float
    lineas = [linea.strip() for linea in datos_audacity.split('\n') if linea.strip() and not linea.startswith('#')]
    frecuencias = []
    nivel_db = []
    
    for linea in lineas:
        freq, db = linea.replace(',', '.').split()
        frecuencias.append(float(freq))
        nivel_db.append(float(db))
    
    return np.array(frecuencias), np.array(nivel_db)