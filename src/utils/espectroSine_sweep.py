import numpy as np

"""
    Carga y procesa datos espectrales exportados desde Audacity.
    
    Procesa un string con formato de tabla donde:
    - Las columnas están separadas por tabs
    - Los valores decimales usan coma (,) como separador
    
    Returns:
        tuple: Dos arrays NumPy:
            - frecuencias (np.ndarray): Array de frecuencias en Hz
            - nivel_db (np.ndarray): Array de niveles en dB
    
    Processing Steps:
        1. Filtrado de líneas:
           - Elimina líneas vacías y comentarios (que comienzan con '#')
           - Remueve espacios alrededor de cada línea con strip()
        2. Conversión de formatos:
           - Reemplaza comas por puntos para compatibilidad con float()
           - Separa cada línea en dos columnas (frecuencia y nivel dB)
        3. Tipo de datos:
           - Convierte strings a floats
           - Almacena en arrays NumPy para procesamiento numérico
    
    Example:
        >>> frec, db = cargar_espectro()
        >>> print(f"Frecuencia mínima: {frec.min()} Hz")
        >>> print(f"Nivel máximo: {db.max()} dB")
"""
def cargar_espectro_sweep():
    datos_audacity = """

#Frecuencia (Hz)	Nivel (dB)
43.066406	-7.553699
86.132812	-9.200573
129.199219	-11.206594
172.265625	-12.536815
215.332031	-13.541565
258.398438	-14.352097
301.464844	-15.032701
344.531250	-15.619800
387.597656	-16.136175
430.664062	-16.597227
473.730469	-17.013708
516.796875	-17.393536
559.863281	-17.742666
602.929688	-18.065701
645.996094	-18.366289
689.062500	-18.647379
732.128906	-18.911310
775.195312	-19.160093
818.261719	-19.395365
861.328125	-19.618517
904.394531	-19.830750
947.460938	-20.033083
990.527344	-20.226389
1033.593750	-20.411448
1076.660156	-20.588934
1119.726562	-20.759438
1162.792969	-20.923500
1205.859375	-21.081585
1248.925781	-21.234106
1291.992188	-21.381454
1335.058594	-21.523964
1378.125000	-21.661940
1421.191406	-21.795660
1464.257812	-21.925388
1507.324219	-22.051352
1550.390625	-22.173761
1593.457031	-22.292810
1636.523438	-22.408686
1679.589844	-22.521553
1722.656250	-22.631554
1765.722656	-22.738829
1808.789062	-22.843521
1851.855469	-22.945755
1894.921875	-23.045631
1937.988281	-23.143267
1981.054688	-23.238745
2024.121094	-23.332176
2067.187500	-23.423637
2110.253906	-23.513210
2153.320312	-23.600975
2196.386719	-23.687000
2239.453125	-23.771353
2282.519531	-23.854097
2325.585938	-23.935295
2368.652344	-24.015003
2411.718750	-24.093273
2454.785156	-24.170155
2497.851562	-24.245699
2540.917969	-24.319944
2583.984375	-24.392946
2627.050781	-24.464746
2670.117188	-24.535402
2713.183594	-24.604946
2756.250000	-24.673431
2799.316406	-24.740858
2842.382812	-24.807171
2885.449219	-24.872253
2928.515625	-24.936028
2971.582031	-24.998774
3014.648438	-25.061357
3057.714844	-25.124729
3100.781250	-25.188446
3143.847656	-25.249258
3186.914062	-25.303328
3229.980469	-25.353144
3273.046875	-25.410633
3316.113281	-25.483351
3359.179688	-25.553232
3402.246094	-25.590635
3445.312500	-25.612307
3488.378906	-25.681097
3531.445312	-25.790188
3574.511719	-25.828327
3617.578125	-25.798956
3660.644531	-25.879560
3703.710938	-26.037725
3746.777344	-26.010288
3789.843750	-25.954475
3832.910156	-26.162754
3875.976562	-26.242090
3919.042969	-26.067335
3962.109375	-26.265593
4005.175781	-26.444477
4048.242188	-26.176373
4091.308594	-26.411501
4134.375000	-26.603848
4177.441406	-26.251469
4220.507812	-26.649515
4263.574219	-26.656567
4306.640625	-26.358044
4349.707031	-26.959103
4392.773438	-26.530560
4435.839844	-26.696323
4478.906250	-27.041786
4521.972656	-26.465628
4565.039062	-27.252424
4608.105469	-26.657372
4651.171875	-27.014851
4694.238281	-27.126863
4737.304688	-26.716726
4780.371094	-27.536762
4823.437500	-26.623941
4866.503906	-27.678591
4909.570312	-26.753128
4952.636719	-27.593233
4995.703125	-27.014765
5038.769531	-27.427355
5081.835938	-27.311863
5124.902344	-27.284132
5167.968750	-27.579617
5211.035156	-27.200727
5254.101562	-27.789219
5297.167969	-27.179367
5340.234375	-27.933584
5383.300781	-27.214832
5426.367188	-28.009892
5469.433594	-27.308577
5512.500000	-28.009579
5555.566406	-27.473171
5598.632812	-27.920263
5641.699219	-27.728907
5684.765625	-27.740299
5727.832031	-28.089209
5770.898438	-27.500063
5813.964844	-28.526941
5857.031250	-27.276232
5900.097656	-28.919445
5943.164062	-27.187025
5986.230469	-29.030615
6029.296875	-27.367586
6072.363281	-28.681355
6115.429688	-27.916285
6158.496094	-28.021511
6201.562500	-28.754913
6244.628906	-27.467379
6287.695312	-29.372726
6330.761719	-27.424158
6373.828125	-29.061808
6416.894531	-28.111977
6459.960938	-28.099463
6503.027344	-29.243065
6546.093750	-27.496342
6589.160156	-29.568281
6632.226562	-27.921579
6675.292969	-28.523960
6718.359375	-29.238363
6761.425781	-27.624777
6804.492188	-29.766443
6847.558594	-28.084883
6890.625000	-28.526306
6933.691406	-29.603848
6976.757812	-27.681728
7019.824219	-29.693483
7062.890625	-28.654947
7105.957031	-28.150322
7149.023438	-30.106018
7192.089844	-27.982260
7235.156250	-29.054550
7278.222656	-29.717978
7321.289062	-27.841064
7364.355469	-29.874666
7407.421875	-29.099785
7450.488281	-28.100895
7493.554688	-30.325327
7536.621094	-28.607624
7579.687500	-28.545830
7622.753906	-30.443676
7665.820312	-28.322096
7708.886719	-28.998158
7751.953125	-30.403622
7795.019531	-28.203602
7838.085938	-29.357733
7881.152344	-30.348232
7924.218750	-28.188019
7967.285156	-29.589117
8010.351562	-30.353800
8053.417969	-28.227816
8096.484375	-29.687738
8139.550781	-30.447920
8182.617188	-28.306000
8225.683594	-29.654264
8268.750000	-30.625156
8311.816406	-28.438147
8354.882812	-29.489639
8397.949219	-30.847345
8441.015625	-28.667740
8484.082031	-29.210182
8527.148438	-31.033199
8570.214844	-29.052366
8613.281250	-28.873796
8656.347656	-31.053814
8699.414062	-29.632130
8742.480469	-28.598375
8785.546875	-30.768894
8828.613281	-30.370440
8871.679688	-28.552097
8914.746094	-30.139904
8957.812500	-31.074558
9000.878906	-28.905531
9043.945312	-29.354427
9087.011719	-31.362642
9130.078125	-29.729832
9173.144531	-28.787838
9216.210938	-30.880926
9259.277344	-30.825190
9302.343750	-28.826466
9345.410156	-29.836784
9388.476562	-31.543785
9431.542969	-29.658812
9474.609375	-28.977493
9517.675781	-31.077290
9560.742188	-30.988365
9603.808594	-28.995235
9646.875000	-29.798622
9689.941406	-31.714495
9733.007812	-30.096794
9776.074219	-28.980827
9819.140625	-30.755079
9862.207031	-31.575666
9905.273438	-29.471970
9948.339844	-29.375551
9991.406250	-31.503866
10034.472656	-31.075850
10077.539062	-29.193930
10120.605469	-29.906271
10163.671875	-31.922043
10206.738281	-30.605780
10249.804688	-29.159559
10292.871094	-30.396870
10335.937500	-32.071175
10379.003906	-30.297184
10422.070312	-29.243191
10465.136719	-30.768314
10508.203125	-32.101463
10551.269531	-30.151690
10594.335938	-29.351408
10637.402344	-30.995842
10680.468750	-32.135109
10723.535156	-30.142864
10766.601562	-29.434891
10809.667969	-31.075855
10852.734375	-32.227165
10895.800781	-30.254202
10938.867188	-29.483698
10981.933594	-31.009777
11025.000000	-32.370167
11068.066406	-30.488863
11111.132812	-29.520655
11154.199219	-30.805708
11197.265625	-32.492733
11240.332031	-30.867359
11283.398438	-29.595678
11326.464844	-30.493793
11369.531250	-32.459511
11412.597656	-31.411242
11455.664062	-29.778318
11498.730469	-30.144205
11541.796875	-32.132759
11584.863281	-32.085201
11627.929688	-30.149790
11670.996094	-29.870256
11714.062500	-31.502501
11757.128906	-32.660824
11800.195312	-30.797659
11843.261719	-29.804758
11886.328125	-30.747749
11929.394531	-32.678337
11972.460938	-31.757439
12015.527344	-30.072716
12058.593750	-30.152052
12101.660156	-31.931419
12144.726562	-32.715649
12187.792969	-30.804499
12230.859375	-29.951044
12273.925781	-30.880091
12316.992188	-32.798180
12360.058594	-32.033211
12403.125000	-30.294058
12446.191406	-30.180346
12489.257812	-31.731468
12532.324219	-33.012070
12575.390625	-31.353317
12618.457031	-30.137283
12661.523438	-30.570471
12704.589844	-32.447998
12747.656250	-32.815651
12790.722656	-30.918291
12833.789062	-30.167807
12876.855469	-30.992008
12919.921875	-32.902805
12962.988281	-32.539288
13006.054688	-30.706404
13049.121094	-30.270231
13092.187500	-31.346960
13135.253906	-33.143234
13178.320312	-32.355957
13221.386719	-30.643066
13264.453125	-30.377171
13307.519531	-31.574188
13350.585938	-33.268055
13393.652344	-32.322861
13436.718750	-30.675850
13479.785156	-30.455635
13522.851562	-31.649887
13565.917969	-33.333790
13608.984375	-32.449120
13652.050781	-30.786463
13695.117188	-30.501278
13738.183594	-31.576614
13781.250000	-33.331970
13824.316406	-32.725124
13867.382812	-30.989204
13910.449219	-30.534311
13953.515625	-31.380489
13996.582031	-33.197701
14039.648438	-33.113037
14082.714844	-31.328648
14125.781250	-30.594021
14168.847656	-31.118650
14211.914062	-32.851883
14254.980469	-33.507832
14298.046875	-31.863953
14341.113281	-30.738657
14384.179688	-30.879507
14427.246094	-32.288349
14470.312500	-33.688835
14513.378906	-32.609501
14556.445312	-31.066433
14599.511719	-30.757488
14642.578125	-31.634066
14685.644531	-33.377647
14728.710938	-33.420868
14771.777344	-31.716078
14814.843750	-30.827681
14857.910156	-31.105980
14900.976562	-32.571850
14944.042969	-33.848419
14987.109375	-32.719433
15030.175781	-31.223970
15073.242188	-30.882681
15116.308594	-31.654697
15159.375000	-33.341625
15202.441406	-33.737625
15245.507812	-32.142883
15288.574219	-31.042444
15331.640625	-31.073944
15374.707031	-32.224941
15417.773438	-33.814739
15460.839844	-33.427151
15503.906250	-31.800179
15546.972656	-31.021435
15590.039062	-31.311157
15633.105469	-32.679127
15676.171875	-34.041538
15719.238281	-33.183052
15762.304688	-31.648405
15805.371094	-31.066746
15848.437500	-31.516281
15891.503906	-32.969437
15934.570312	-34.145142
15977.636719	-33.088245
16020.703125	-31.631561
16063.769531	-31.131222
16106.835938	-31.638941
16149.902344	-33.093445
16192.968750	-34.218102
16236.035156	-33.154171
16279.101562	-31.719555
16322.167969	-31.197344
16365.234375	-31.664322
16408.300781	-33.056721
16451.367188	-34.276009
16494.433594	-33.376991
16537.500000	-31.912800
16580.566406	-31.274134
16623.632812	-31.607836
16666.699219	-32.866001
16709.765625	-34.258835
16752.832031	-33.741749
16795.898438	-32.234600
16838.964844	-31.398205
16882.031250	-31.509584
16925.097656	-32.547386
16968.164062	-34.060883
17011.230469	-34.179810
17054.296875	-32.720207
17097.363281	-31.633568
17140.429688	-31.433142
17183.496094	-32.163239
17226.562500	-33.605766
17269.628906	-34.489555
17312.695312	-33.399521
17355.761719	-32.057346
17398.828125	-31.469378
17441.894531	-31.801146
17484.960938	-32.954773
17528.027344	-34.367840
17571.093750	-34.184471
17614.160156	-32.733749
17657.226562	-31.738667
17700.292969	-31.573870
17743.359375	-32.299210
17786.425781	-33.684761
17829.492188	-34.631256
17872.558594	-33.698307
17915.625000	-32.341866
17958.691406	-31.639160
18001.757812	-31.804106
18044.824219	-32.772953
18087.890625	-34.213097
18130.957031	-34.598759
18174.023438	-33.336582
18217.089844	-32.151184
18260.156250	-31.659554
18303.222656	-32.042744
18346.289062	-33.143970
18389.355469	-34.517918
18432.421875	-34.512123
18475.488281	-33.158569
18518.554688	-32.093643
18561.621094	-31.726328
18604.687500	-32.218349
18647.753906	-33.371479
18690.820312	-34.670277
18733.886719	-34.500008
18776.953125	-33.145351
18820.019531	-32.130104
18863.085938	-31.795732
18906.152344	-32.301895
18949.218750	-33.441261
18992.285156	-34.724300
19035.351562	-34.602306
19078.417969	-33.282001
19121.484375	-32.247944
19164.550781	-31.858130
19207.617188	-32.292866
19250.683594	-33.357777
19293.750000	-34.674114
19336.816406	-34.800732
19379.882812	-33.572075
19422.949219	-32.460320
19466.015625	-31.948166
19509.082031	-32.255543
19552.148438	-33.345631
19595.214844	-35.439331
19638.281250	-38.748997
19681.347656	-43.204582
19724.414062	-48.549728
19767.480469	-54.470760
19810.546875	-60.656845
19853.613281	-66.824966
19896.679688	-72.741623
19939.746094	-78.234879
19982.812500	-83.221413
20025.878906	-87.674141
20068.945312	-91.628845
20112.011719	-95.143051
20155.078125	-98.248718
20198.144531	-101.083160
20241.210938	-103.623711
20284.277344	-105.858353
20327.343750	-108.017548
20370.410156	-109.806808
20413.476562	-111.611526
20456.542969	-113.164024
20499.609375	-114.390884
20542.675781	-115.832832
20585.742188	-116.630768
20628.808594	-117.930084
20671.875000	-118.353439
20714.941406	-119.624725
20758.007812	-119.392555
20801.074219	-120.507889
20844.140625	-120.330124
20887.207031	-120.795738
20930.273438	-120.960258
20973.339844	-121.580666
21016.406250	-121.736893
21059.472656	-121.622581
21102.539062	-121.762321
21145.605469	-121.714508
21188.671875	-122.175430
21231.738281	-122.484932
21274.804688	-121.886627
21317.871094	-121.540825
21360.937500	-122.202667
21404.003906	-122.836922
21447.070312	-122.838280
21490.136719	-122.213837
21533.203125	-122.244324
21576.269531	-122.243996
21619.335938	-122.512192
21662.402344	-122.562202
21705.468750	-122.542168
21748.535156	-122.247444
21791.601562	-121.975731
21834.667969	-122.285583
21877.734375	-122.308907
21920.800781	-122.385223
21963.867188	-122.606171
22006.933594	-122.368820
    """
    
    # Procesamiento: eliminar comas y convertir a float
    lineas = [linea.strip() for linea in datos_audacity.split('\n') if linea.strip() and not linea.startswith('#')]
    frecuencias = []
    nivel_db = []
    
    for linea in lineas:
        freq, db = linea.replace(',', '.').split()
        frecuencias.append(float(freq))
        nivel_db.append(float(db))
    
    return np.array(frecuencias), np.array(nivel_db)